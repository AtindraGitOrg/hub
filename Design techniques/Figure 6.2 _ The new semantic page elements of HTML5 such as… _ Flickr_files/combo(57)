YUI.add("signup-interstitial-view",function(t,i){"use strict";var n;n={css:{destinationContainer:"body",closeX:".close-x",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content",modalSelector:".modal"},options:{}},t.namespace("Views").SignUpInterstitial=t.FlickrView.create(this.name,t.Views.FluidModal,[],{langBundles:this.details.langBundles,buildContainer:function(){var i=t.one(n.css.destinationContainer);if(!this.alreadyShowingModal){var e={signUpMessage:this.get("signUpMessage")};this.setContainerWithTemplate("signup-interstitial",e),i&&(i.append(this.get("container")),this.reposition(),this.get("modalOverlayType").get("overlay").removeClass("interstitial-fade"),this.get("container").one(".signup-interstitial-body").removeClass("interstitial-fade"))}return this},activate:function(){var t=this.get("container");this.registerEventHandler(t.one(".signup-button").on("click",this.instrumentSignupClick.bind(this))),this.registerEventHandler(t.one(".signin-link").on("click",this.instrumentSigninClick.bind(this))),this.constructor.superclass.activate.call(this)},instrumentSignupClick:function(n){t.rapidTracker.beacon(i,"signupIntSignupClick")},instrumentSigninClick:function(n){t.rapidTracker.beacon(i,"signupIntSigninClick")},show:function(){t.rapidTracker.beacon(i,"signupIntShown"),this.constructor.superclass.show.call(this)},close:function(n){t.rapidTracker.beacon(i,"signupIntCancelClick"),this.constructor.superclass.close.call(this,n)}},{ATTRS:{showFooter:{value:!1},showHeader:{value:!1},showButtonFlavorText:{value:!1},showButtons:{value:!1},showActionButton:{value:!1},showCancelButton:{value:!1},modalSelector:{value:".signup-interstitial-body"},modalOverlayType:{value:t.OverlayManager.SignupInterstitialOverlay}}})},"@VERSION@",{requires:["flickr-view","fluid-modal-view","hermes-template-signup-interstitial"],optionalRequires:["fluid"],langBundles:["common","growth"]});YUI.add("hermes-lang-growth",function(e,o){e.Intl.add("hermes/growth","en-US",{MINI_SIGNUP_FOOTER_MESSAGE:["Never miss a post from ","${username}"],MINI_SIGNUP_FOOTER_MESSAGE_EXPLORE:["Join Flickr to explore world class photos"],MINI_SIGNUP_FOOTER_MESSAGE_SEARCH:["Join Flickr to see more ","${query}"," photos!"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-partner-account-banner",function(e,a){var r=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,r,n,t){return'<div class="banner-container">\n\t<p>Dear Flickr Member: due to partnership changes with AT&T, you need to update your primary email address. <a class="learn-more">Learn more</a></p>\n</div>\n'},useData:!0}),n={};e.Array.each([],function(a){var r=e.Template.get("hermes/"+a);r&&(n[a]=r)}),e.Template.register("hermes/partner-account-banner",function(a,t){return t=t||{},t.partials=t.partials?e.merge(n,t.partials):n,r(a,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-partner-account-modal",function(e,t){var a=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,r){return'<div>\n\tWith the launch of the new att.net homepage on June 30, 2017, you will need to change the primary email address you use to sign into your Flickr/Yahoo account. Your data and photos on Flickr will not be deleted or modified in any way. You will need to complete this process before June 30, 2017 in order to continue accessing your Flickr account.\n\t<br/><br/>\n\t<a href="/partner-account">Click here to learn more about these changes.</a>\n\t<br/><br/>\n\t<a href="/account/transfer">\n\t\t<button class="update-email">Update your email address</button>\n\t</a>\n</div>\n'},useData:!0}),n={};e.Array.each([],function(t){var a=e.Template.get("hermes/"+t);a&&(n[t]=a)}),e.Template.register("hermes/partner-account-modal",function(t,r){return r=r||{},r.partials=r.partials?e.merge(n,r.partials):n,a(t,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("partner-account-banner-view",function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{buildContainer:function(){return this.setContainerWithTemplate("partner-account-banner"),this},activate:function(){var n=this.get("container").one(".learn-more");return n&&this.registerEventHandler(n.on("click",this.openModal.bind(this))),e.AnchorRepositioner.addOffset(t,this.get("container")),this},openModal:function(){new e.Views.FluidModal({title:"The way you sign in to Flickr is changing",htmlMessage:this.templates("partner-account-modal")({}),appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelX:!0,showCancelButton:!1,showActionButton:!1,hideModalOverlay:!1,showFooter:!1}).show()},destructor:function(){e.AnchorRepositioner.removeOffset(t)}})},"@VERSION@",{requires:["flickr-view","hermes-template-partner-account-banner","hermes-template-partner-account-modal"]});YUI.add("hermes-template-featured-toast",function(e,a){var r=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,r,t,s){return'<div class="featured-toast">\n\t'+e.escapeExpression((r.renderTrustedMarkup||a&&a.renderTrustedMarkup||r.helperMissing).call(null!=a?a:{},null!=a?a.htmlContent:a,{name:"renderTrustedMarkup",hash:{},data:s}))+"\n</div>\n"},useData:!0}),t={};e.Array.each([],function(a){var r=e.Template.get("hermes/"+a);r&&(t[a]=r)}),e.Template.register("hermes/featured-toast",function(a,s){return s=s||{},s.partials=s.partials?e.merge(t,s.partials):t,r(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("featured-toast-view",function(t){t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.params=t,this.config=t.featuredToastConfig,this.config.id=this.config.id||"",this.config.htmlContent=this.config.htmlContent||"",this.config.showOnActivate=void 0!==this.config.showOnActivate&&this.config.showOnActivate,this.config.classList=this.config.classList||[]},loadState:function(){return t.Promise.resolve()},buildContainer:function(){this.setContainerWithTemplate("featured-toast",{htmlContent:this.config.htmlContent,classList:this.config.classList})},activate:function(){var i=this,n=this.get("container");this.contentContainer=n.one(".featured-toast"),this.initialClasses=Array.prototype.slice.call(this.contentContainer.getDOMNode().classList),this.updateClasses(),this.setupEvents(),this.config.showOnActivate&&setTimeout(function(){i.show()},0),setTimeout(function(){i.applyBannerOffset()},100),this.registerEventHandler(t.on("resize",t.betterThrottle(this.applyBannerOffset.bind(this),500,this,!0))),this.fire("activated")},show:function(){this.get("container").addClass("activated")},dismiss:function(){var t=this.get("container");t.setStyle("bottom",null),t.removeClass("activated")},handlePrimaryActionClick:function(t){t.preventDefault(),t.stopPropagation(),this.fire("primaryActionClicked",{clickEvent:t})},handleSecondaryActionClick:function(t){t.preventDefault(),t.stopPropagation(),this.fire("secondaryActionClicked",{clickEvent:t})},applyBannerOffset:function(){var i,n=t.one(".footer-banner-view .footer-container");n&&(i=n.get("clientHeight"),this.get("container").setStyle("bottom",i))},setup:function(t){this.config.htmlContent=t.htmlContent||"",this.config.classList=t.classList||[],this.contentContainer.set("innerHTML",this.config.htmlContent),this.updateClasses(),this.setupEvents()},updateClasses:function(){var t=this;this.contentContainer.set("className",""),this.initialClasses.forEach(function(i){t.contentContainer.addClass(i)}),this.config.classList.forEach(function(i){t.contentContainer.addClass(i)})},setupEvents:function(){var t=this.get("container"),i=t.one(".primary-action"),n=t.one(".secondary-action");i&&i.on("click",this.handlePrimaryActionClick.bind(this)),n&&n.on("click",this.handleSecondaryActionClick.bind(this))}})},"@VERSION@",{requires:["flickr-view","hermes-template-featured-toast"]});YUI.add("photo-prints-helper",function(e,r){var t=require("url-parse"),i=require("hermes-core/flog")(r),n=require("superagent"),s=e.mix({langBundles:["prints"]},e.Localizable),o={default:"prints.SOMETHING_WRONG_PREPARING_PRINT",4:"prints.UNSUPPORTED_FILE_TYPE_PLEASE_JPG"};e.PhotoPrintsHelper=function(r){var a=e.config.flickr.flickrprints.devBaseUrl,l=e.config.flickr.flickrprints.baseUrl,c=e.config.flickr.flickrprints.cartPath,p=e.config.flickr.flickrprints.devApiKey,u=e.config.flickr.flickrprints.apiKey,d=e.config.flickr.flickrprints.dismiss_prints_new_badge_cookie_name;return{isPrintsEnabled:function(){return r.flipper.isFlipped("enable-photo-prints")&&r.getViewer().signedIn},canPrintPhoto:function(e){return this.isPrintsEnabled()&&e.getValue("isOwner")&&!e.getValue("isVideo")},registerPrint:function(t,i){var n=this;return r.callAPI("flickr.printservice.getRedirectURL",{user_id:t.getValue("owner").getValue("id"),photo_id:t.getValue("id"),return_url:i}).then(function(r){return n.isPrintUrlSafe(r.redirectURL)?{redirectURL:r.redirectURL}:e.Promise.reject({message:n.getRegisterPrintErrorCodeMessage()})}).catch(function(e){throw{message:n.getRegisterPrintErrorCodeMessage(e.code)}})},isPrintUrlSafe:function(e){var r=new t(e);return"https:"===r.protocol&&"https://"+r.hostname===this.getBaseUrl()},getBaseUrl:function(){return r.flipper.isFlipped("enable-photo-prints-prod-url")?l:a},getApiKey:function(){return r.flipper.isFlipped("enable-photo-prints-prod-url")?u:p},getCartUrl:function(){return this.getBaseUrl()+c},fetchCartCount:function(){var e=this.getBaseUrl()+"/api/v2/cart?APIKey="+this.getApiKey();return n.get(e).withCredentials().set("Accept","application/json").then(function(e){return{count:e&&e.body.Response.Cart?e.body.Response.Cart.ItemCount:0}}).catch(function(e){throw i.error("Error fetching cart count",{err:e}),e})},fetchOrder:function(e){var r=this.getBaseUrl()+"/api/v2/order/"+e+"?_expand=OrderBillingAddress&APIKey="+this.getApiKey();return n.get(r).withCredentials().set("Accept","application/json").then(function(r){var t="/api/v2/order/"+e+"!billingaddress",i=r.body.Response.Order,n=r.body.Expansions[t];return{orderId:i.OrderID,orderUrl:i.WebUri,email:n.OrderBillingAddress.Email}})},getRegisterPrintErrorCodeMessage:function(e){var r=e?e.toString():"";return o.hasOwnProperty(r)?s.intlMessage({intlName:o[r]}):s.intlMessage({intlName:o.default})},shouldShowNewBadge:function(){return!r.getCookie(d)},setDismissNewBadge:function(){var e=new Date;e.setTime(e.getTime()+36e10),r.setCookie({cookieName:d,cookieValue:1,expires:e,path:"/"})}}}},"@VERSION@",{requires:[]});